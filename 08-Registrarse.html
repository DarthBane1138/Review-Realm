<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Inicio Sesión</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"/>
    <link rel="stylesheet" href="estilos.css">
  </head>

  <!-- Clase para enlazar fondo de página -->
  <body> 
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand">
            <img src="img/ReviewRealmlogoblanco.png" alt="ReviewRealm">
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
              <a class="nav-link" href="01-index.html">Inicio</a>
              <a class="nav-link" href="02-categorias.html">Categorías</a>
              <a class="nav-link" href="04-recomendacion_aleatoria.html">Recomendación aleatoria</a>
              <a class="nav-link" href="06-Ingresar_juego.html">Ingresar Juego</a>
            </div>
            <div class="ms-auto navbar-nav">
              <div class="nav-item d-flex align-items-center"></div>
              <a class="nav-link" href="03-inicio_sesion.html">Iniciar Sesión</a>
              <a class="nav-link active" aria-current="page"  href="08-Registrarse.html">Registrarse</a>
            </div>
            <!--<div class="ms-auto navbar-nav">
              <div class="nav-item d-flex align-items-center">
                <a class="nav-link" href = "07-Perfil.html">Perfil</a>
                <img src="img/imagen_perfil.png" alt="Foto de perfil" width="30" class="rounded-circle">   
              </div>
            </div>-->
            </div>
          </div>
        </div>
      </nav>

      <div class="contenedor-titulo">
        <h1 class ="text-center">Registro</h1>
        </div>

      <!-- Columnas para centrar contenido de página -->
      <div class = "container-fluid" id= "cuerpo_categorias">
        <div class = "row">
          <div class = "col-2"></div>
          <!-- Columna principal -->
          <div class = "col-8" id = "columna_principal">
            <div class="container mt-3">
              <br><br>
              <div class="row justify-content-center">
                <div class="col-md-6 mb-5">
                  <!-- formulario para Registro -->
                  <form id="formulario-registro">
                    <!-- Nombre de Usuario -->
                    <div class="mb-2">
                      <label for="itUserName" class="form-label">Nombre de Usuario</label>
                      <input type="text" class="form-control" id="itUserName" placeholder="Ingrese un nombre de usuario">
                      <div id="mensajeUserName" class="errores"></div>
                    </div><br>
                    <!-- Contraseña -->
                    <div class="mb-2">
                      <label for="itPassword" class="form-label">Contraseña</label>
                      <input type="password" class="form-control" id="itContrasena" placeholder="Debe contener al menos una mayúscula, un número, y !./¡¿?">
                      <div id="mensajeContrasena" class="errores"></div>
                    </div><br>
                    <!-- Confirmación Contraseña -->
                    <div class="mb-2">
                      <label for="itPasswordConf" class="form-label">Confirmar Contraseña</label>
                      <input type="password" class="form-control" id="itConstrasenaConf" placeholder="Vuelva a ingresar su contraseña">
                      <div id="mensajeContrasenaConf" class="errores"></div>
                    </div><br>
                    <!-- Correo Electrónico -->
                    <div class="mb-2">
                      <label for="itMail" class="form-label">Correo Electrónico</label>
                      <input type="email" class="form-control" id="itEmail" placeholder="Ingrese su correo electrónico">
                      <div id="mensajeEmail" class="errores"></div>
                    </div>

                    <div class="mb-2">
                      <label for="genero" class="form-label">Género</label>
                      <div id="genero" class="checkbox-container">
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="accion" name="genero" value="accion">
                              <label class="form-check-label" for="accion">Acción</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="aventura" name="genero" value="aventura">
                              <label class="form-check-label" for="aventura">Aventura</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="rpg" name="genero" value="rpg">
                              <label class="form-check-label" for="rpg">RPG</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="shooter" name="genero" value="shooter">
                              <label class="form-check-label" for="shooter">Shooter</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="estrategia" name="genero" value="estrategia">
                              <label class="form-check-label" for="estrategia">Estrategia</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="deportes" name="genero" value="deportes">
                              <label class="form-check-label" for="deportes">Deportes</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="carreras" name="genero" value="carreras">
                              <label class="form-check-label" for="carreras">Carreras</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="simulacion" name="genero" value="simulacion">
                              <label class="form-check-label" for="simulacion">Simulación</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="puzzles" name="genero" value="puzzles">
                              <label class="form-check-label" for="puzzles">Puzzles</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="survival_horror" name="genero" value="survival_horror">
                              <label class="form-check-label" for="survival_horror">Survival Horror</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="plataformas" name="genero" value="plataformas">
                              <label class="form-check-label" for="plataformas">Plataformas</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="lucha" name="genero" value="lucha">
                              <label class="form-check-label" for="lucha">Lucha</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="ritmo" name="genero" value="ritmo">
                              <label class="form-check-label" for="ritmo">Ritmo</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="mmorpg" name="genero" value="mmorpg">
                              <label class="form-check-label" for="mmorpg">MMORPG</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="moba" name="genero" value="moba">
                              <label class="form-check-label" for="moba">MOBA</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="tower_defense" name="genero" value="tower_defense">
                              <label class="form-check-label" for="tower_defense">Tower Defense</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="sandbox" name="genero" value="sandbox">
                              <label class="form-check-label" for="sandbox">Sandbox</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="party_games" name="genero" value="party_games">
                              <label class="form-check-label" for="party_games">Party Games</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="roguelike" name="genero" value="roguelike">
                              <label class="form-check-label" for="roguelike">RogueLike</label>
                          </div>
                          <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="visual_novel" name="genero" value="visual_novel">
                              <label class="form-check-label" for="visual_novel">Visual Novel</label>
                          </div>
                      </div>
                      <div id="mensajeCheckBox" class="errores"></div>
                  </div><br>



                    <button type="submit" class="btn btn-primary" id="bEnviar">Registrar</button>

                  </form>
                  <div style="height: 500px;"></div>
                </div>
              </div>
            </div>
          </div>
          <div class = "col-2"></div>
        </div>
      </div>
            


    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>


      var expr = /^[a-zA-Z0-9_\.\-]+@[a-zA-Z0-9_\-]+\.[a-zA-Z0-9\-\.]+$/;
      var exprpass = /^(?=.*[a-zA-Z])(?=.*\d{2,})(?=.*[!./¡¿?])[a-zA-Z\d!./¡¿?]{10,}$/;

      // Para limitar los caracteres del nombre de usuario
      $(document).ready(function(){
        $("#itUserName").on("input", function(){
          var nombreUsuario = $(this).val();
          if (nombreUsuario.length > 20){
            $(this).val(nombreUsuario.substr(0,20));
          }
        });
      });

      // Verificador que no permite seleccionar más de 3 casillas de género
      $(document).ready(function(){
        $('input[name="genero"]').change(function(){ // Se seleccionan todos los elementos input con nombre name igual a a genero, adjunta controlador de eventos change para verificar cada vez que uno de estos cambie
          var maxAllowed = 3;
          var checkedCount = $('input[name="genero"]:checked').length;

          if(checkedCount > maxAllowed) {
            $(this).prop('checked', false);
            alert('Solo puedes seleccionar un máximo de 3 géneros');
          }
        });
      });

      // Validaciones de formulario
      $(document).ready(function(){
        $("#bEnviar").click(function(){
          event.preventDefault(); 
          // Validaciones de nombre de usuario
          var nombreUsuario = $("#itUserName").val();

          // Validación para nombre de usuario en caso de que esté vacío
          if (nombreUsuario == ""){
            $("#mensajeUserName").text("Ingrese un nombre de usuario válido").fadeIn();
            return false;
          // Validación para nombre de usuario en caso de contanga menos de 5 caracteres
          } else if (nombreUsuario.length < 5){
            $("#mensajeUserName").text("El nombre de usuario debe tener al menos 5 caracteres").fadeIn();
            return false;
          } else {
            $("#mensajeUserName").fadeOut();
            usuarioBool = true; // Se establece a true si la validación pasa
          }

          // Validaciones de contraseña
          var contrasena = $("#itContrasena").val();
          var confContrasena = $("#itConstrasenaConf").val();

          // Validación contraseña en caso de que esté vacía
          if(contrasena === ""){
            $("#mensajeContrasena").text("La contraseña no puede estar vacía").fadeIn();
            return false;
          // Validación contraseña en caso de sea menor a 10 caracteres
          } else if (contrasena.length < 10){
            $("#mensajeContrasena").text("La contraseña debe tener al menos 10 caracteres").fadeIn();
            return false;
          // Validación contraseña en caso de no cumpla con el formato
          } else if (!exprpass.test(contrasena)){
            $("#mensajeContrasena").text("La contraseña debe contener al menos una mayúscula, un número y un carácter especial").fadeIn();
            return false;
          } else {
            $("#mensajeContrasena").fadeOut();
            if (confContrasena !== contrasena){
              $("#mensajeContrasenaConf").text("La confirmación de la contraseña debe ser igual a la contraseña").fadeIn();
              return false;
            } else {
              $("#mensajeContrasenaConf").fadeOut();
              contrasenaBool = true; // Se establece a true si la validación pasa
            }
          }

          // Validaciones de correo electrónico
          var correo = $("#itEmail").val();
          var correoBool = false; // Booleano para validar el correo electrónico

          // Validación de correo en caso de que la casilla esté vacía
          if(correo === ""){
            $("#mensajeEmail").text("El correo electrónico no puede estar vacío").fadeIn();
            return false;
          // Validación de correo en caso de no se cumpla con el formato
          } else if (!expr.test(correo)){
            $("#mensajeEmail").text("El formato del correo electrónico es incorrecto").fadeIn();
            return false;
          } else {
            $("#mensajeEmail").fadeOut();
            correoBool = true; // Se establece a true si la validación pasa
          }

          // Validaciones de casillas marcadas
          var maxAllowed = 3;
          var minAllowed = 1;
          var checkBoxBool = false; // Booleano para validar las casillas marcadas

          // Validación de checkbox para que el usuario deba seleccionar a lo menos una casilla
          var checkedCount = $('input[name="genero"]:checked').length;
          if(checkedCount < minAllowed){
            $("#mensajeCheckBox").text("Debe seleccionar al menos una casilla").fadeIn();
            return false;
          } else {
            $("#mensajeCheckBox").fadeOut();
            checkBoxBool = true; // Se establece a true si la validación pasa
          }

          Swal.fire({
            position: "centered",
            icon: "success",
            title: "Felicidades, has sido registrado",
            showConfirmButton: false,
            timer: 3000
          });

        // Evitar que el formulario se envíe inmediatamente después de hacer clic en el botón
        setTimeout(function(){
        $("form").submit(); // Envía el formulario después de 3 segundos
        }, 3000);

          
        });
      });

    </script>
  </body>
</html>